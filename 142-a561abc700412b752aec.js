"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[142],{9829:function(e,t,a){var n=a(4836);t.Z=void 0;var r=n(a(4938)),l=a(5893),o=(0,r.default)((0,l.jsx)("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutline");t.Z=o},2142:function(e,t,a){a.r(t);var n=a(7294),r=a(3071),l=a(9567),o=a(2068),c=a(130),i=a(30),s=a(5305),m=a(9929),u=a(594),p=a(9829),d=a(8416);t.default=e=>{const{open:t,anchor:a,closeCallout:y}=e,E="PROD",{Player:v,PlayerTimestamp:h,SetPlayerTimestamp:J,TempoLevel:Z,SelectedAudio:b}=n.useContext(r.I),[w,f]=(0,d.Z)(!0,"startLoopEnabled",d.w.State,E),[S,C]=(0,d.Z)(!0,"endLoopEnabled",d.w.State,E),[k,g]=(0,d.Z)(null,"startLoopTime",d.w.State,E),[N,P]=(0,d.Z)(null,"endLoopTime",d.w.State,E);n.useEffect((()=>{w||S||R()}),[w,S]);const R=async()=>{if(l.J7.cancel(),b.Stems.length>0){b.Stems.forEach((e=>{v.current.player(e.Name).unsync(),v.current.player(e.Name).dispose()}));const e=b.Stems.reduce(((e,t)=>(e[t.Name]=t.Path,e)),{});v.current=new l.dQ({urls:e,onload:async()=>{await Promise.all(b.Stems.map((async e=>{const t=e.Channel.muted,a=(new l.$W).toDestination();e.Channel=a,v.current.player(e.Name).connect(a),v.current.player(e.Name).reverse=b.Reversed,v.current.player(e.Name).playbackRate=Z,v.current.player(e.Name).volume.value=e.Volume,v.current.player(e.Name).mute=t,v.current.player(e.Name).sync(),v.current.player(e.Name).start(0)}))),l.J7.loop=!0,l.J7.loopStart=k,l.J7.loopEnd=N,l.J7.start()}}).toDestination()}else v.current.unsync(),v.current=new l.J5,await v.current.load(b.Path),v.current.reverse=b.Reversed,v.current.playbackRate=Z,v.current.toDestination().sync().start(0),l.J7.loop=!0,l.J7.loopStart=k,l.J7.loopEnd=N,l.J7.start()};return n.createElement(n.Fragment,null,n.createElement(o.ZP,{open:t,anchorEl:a,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},n.createElement("div",{style:{position:"relative",padding:"1em",verticalAlign:"center"}},n.createElement("div",{style:{position:"absolute",top:"0",left:"0"}},n.createElement(c.Z,{color:"primary",disabled:w||S,onClick:()=>{l.J7.loop=!1,l.J7.seconds=N,l.J7.scheduleRepeat((()=>{J(l.Ky().toSeconds())}),1,N,b.Duration-N),l.J7.start(),P(null),g(null),f(!0),C(!0)}},n.createElement(p.Z,null)),n.createElement(c.Z,{color:"primary",disabled:!0,onClick:()=>{(async()=>{const e=new l.KN({mimeType:"audio/webm"});v.current.connect(e),e.start(),await setTimeout((async()=>{const t=await e.stop(),a=URL.createObjectURL(t),n=document.createElement("a");n.download="recording.webm",n.href=a,n.click()}),4e3)})()}},n.createElement(m.Z,null))),n.createElement("div",{style:{position:"absolute",top:"0",right:"0"}},n.createElement(c.Z,{onClick:()=>{y()},color:"primary",style:{backgroundColor:"transparent"}},n.createElement(u.Z,null)))),n.createElement(i.ZP,{container:!0,spacing:1,padding:1},n.createElement(i.ZP,{item:!0},n.createElement(s.Z,{variant:"contained",disabled:!w||"started"!==l.J7.state,onClick:()=>{l.J7.loopStart=h,g(h),f(!1)},style:{minWidth:"6em"}},"Start")),n.createElement(i.ZP,{item:!0},n.createElement(s.Z,{variant:"contained",disabled:!S||"started"!==l.J7.state,onClick:()=>{l.J7.loopEnd=h,P(h),C(!1)},style:{minWidth:"6em"}},"End")))))}}}]);
//# sourceMappingURL=142-a561abc700412b752aec.js.map